<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        Machines
      </mat-card-title>
    </mat-card-header>
    <mat-divider></mat-divider>
    <mat-card-content>
      <div *ngIf="dataSource"  class="mat-elevation-z1">
        <table mat-table [dataSource]="dataSource" matSort>

          <!-- Position Column -->
          <ng-container matColumnDef="numMachine">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> numMachine </th>
            <td mat-cell *matCellDef="let element"> {{element.numMachine}} </td>
          </ng-container>

          <ng-container matColumnDef="typeMachine">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> TypeMachine </th>
            <td mat-cell *matCellDef="let element"> {{element.typeMachine}} </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="ecran">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Ecran </th>
            <td mat-cell *matCellDef="let element"> {{element.ecran.marque.nomMarque}} </td>
          </ng-container>

          <ng-container matColumnDef="marque">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Marque </th>
            <td mat-cell *matCellDef="let element"> {{element.marque.nomMarque}} </td>
          </ng-container>

          <ng-container matColumnDef="fournisseur">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Fournisseur </th>
            <td mat-cell *matCellDef="let element"> {{element.fournisseur.nomF }} </td>
          </ng-container>

          <ng-container matColumnDef="carteVideo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> CarteVideo </th>
            <td mat-cell *matCellDef="let element"> {{element.carteVideo.nomCarte}} </td>
          </ng-container>
          <ng-container matColumnDef="disqueDur">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> DisqueDur </th>
            <td mat-cell *matCellDef="let element"> {{element.disqueDur.typeDD}} </td>
          </ng-container>
          <ng-container matColumnDef="emplacement">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Emplacement </th>
            <td mat-cell *matCellDef="let element"> {{element.emplacement.nomEmplacement}} </td>
          </ng-container>
          <ng-container matColumnDef="dateAchat">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> DateAchat </th>
            <td mat-cell *matCellDef="let element"> {{element.dateAchat}} </td>
          </ng-container>
          <ng-container matColumnDef="ram">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Ram </th>
            <td mat-cell *matCellDef="let element"> {{element.ram}} </td>
          </ng-container>
          <ng-container matColumnDef="adrIP">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> AdressIP </th>
            <td mat-cell *matCellDef="let element"> {{element.adrIP}} </td>
          </ng-container>
          <ng-container matColumnDef="suprimer">
            <th mat-header-cell *matHeaderCellDef >suprimer </th>
            <td mat-cell *matCellDef="let element">
              <button *ngIf="auth.role === 'admin'" mat-raised-button (click)=" onDeleteMachine(element.numMachine)" style="background-color: red" > suprimer</button>
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <mat-paginator #paginator
                       [pageSizeOptions]="[5, 10, 20]"
                       showFirstLastButtons
                       aria-label="Select page of machines">
        </mat-paginator>
      </div>

    </mat-card-content>

  </mat-card>

  <br>
  <mat-card *ngIf="auth.role === 'admin'" class="form-block" style="float: right;">
    <mat-card-header>
      <mat-card-title>Ajouter une Machine</mat-card-title>
    </mat-card-header>
    <mat-card-actions class="mt-4">
      <button mat-raised-button color="primary" (click)="goToNewMachine()">Ajouter </button>
    </mat-card-actions>
  </mat-card>
</div>
